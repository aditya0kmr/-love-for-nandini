<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Secret Love Letter - Enchanted Edition</title>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap');

  body, html {
    margin: 0; padding: 0; height: 100%; overflow-x: hidden;
    background: linear-gradient(135deg, #1b0c2c, #420b58);
    color: #fff;
    font-family: 'Georgia', serif;
    transition: background-color 3s ease;
    cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path fill="%23ff4a72" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3A5.498 5.498 0 0 1 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"/></svg>') 12 12, auto;
  }

  #app-container {
    max-width: 720px;
    margin: 60px auto;
    background: rgba(255, 255, 255, 0.07);
    border-radius: 20px;
    backdrop-filter: blur(18px);
    box-shadow: 0 0 40px #ff3ca7aa;
    padding: 30px 40px 50px;
    position: relative;
    overflow: hidden;
    user-select: none;
  }
  #app-container.transition-out {
    animation: slideOutLeft 1s forwards;
  }
  @keyframes slideOutLeft {
    100% {
      transform: translateX(-100vw) rotateY(30deg);
      opacity: 0;
      filter: blur(8px);
    }
  }
  #app-container.transition-in {
    animation: slideInRight 1s forwards;
  }
  @keyframes slideInRight {
    0% {
      transform: translateX(100vw) rotateY(-30deg);
      opacity: 0;
      filter: blur(8px);
    }
    100% {
      transform: translateX(0) rotateY(0);
      opacity: 1;
      filter: blur(0);
    }
  }

  #heart-3d {
    width: 150px;
    height: 150px;
    margin: 0 auto 30px;
    filter: drop-shadow(0 0 25px #ff61abaa);
  }

  h2.letter-title {
    font-family: 'Great Vibes', cursive;
    font-size: 3rem;
    text-align: center;
    text-shadow: 0 0 10px #ff73b4;
    margin-bottom: 20px;
  }
  .letter-paragraph {
    font-size: 1.3rem;
    line-height: 1.7;
    opacity: 0;
    text-indent: 2em;
    margin-bottom: 20px;
    color: #fce4f4;
    filter: drop-shadow(0 0 2px #ff4ca5);
    transition: opacity 1.2s ease;
    position: relative;
  }
  .letter-paragraph.visible {
    opacity: 1;
  }
  .reveal-mask {
    background: linear-gradient(90deg, transparent, #fff 20%, #fff 80%, transparent);
    position: absolute;
    top: 0; left: -100%;
    height: 100%;
    width: 200%;
    animation: revealLight 5s ease forwards;
    pointer-events: none;
    opacity: 0.3;
    mix-blend-mode: screen;
    border-radius: 8px;
  }
  @keyframes revealLight {
    to { left: 100%; opacity: 0; }
  }

  .sparkle {
    color: #ffc3dd;
    text-shadow:
      0 0 6px #ff4ca5,
      0 0 20px #ff73b4,
      0 0 40px #ff85bf;
    animation: sparkleGlow 2.4s ease-in-out infinite alternate;
  }
  @keyframes sparkleGlow {
    0%, 100% {
      filter: brightness(1);
      text-shadow:
        0 0 4px #ff4295,
        0 0 18px #ff62a9,
        0 0 28px #ff7ab6;
    }
    50% {
      filter: brightness(1.4);
      text-shadow:
        0 0 12px #ff75c0,
        0 0 30px #ff91ce,
        0 0 48px #ffaad5;
    }
  }

  #next-page-btn {
    display: block;
    margin: 40px auto 0;
    font-size: 1.25rem;
    padding: 14px 36px;
    background: linear-gradient(135deg, #ff5db1, #ff3181);
    border: none;
    outline: none;
    border-radius: 50px;
    color: white;
    cursor: pointer;
    box-shadow:
      0 0 12px #ff4f90,
      0 0 24px #ff3d76;
    transition: box-shadow 0.3s ease;
  }
  #next-page-btn:hover {
    box-shadow:
      0 0 24px #ff64a0,
      0 0 44px #ff4394,
      0 0 80px #ff3585;
  }

  #particles {
    position: fixed;
    top: 0; left: 0; width: 100vw; height: 100vh;
    pointer-events: none;
    z-index: 0;
  }

  #heart-trail {
    position: fixed;
    top: 0; left: 0;
    pointer-events: none;
    z-index: 9999;
  }
  .trail-heart {
    position: absolute;
    width: 12px;
    height: 12px;
    pointer-events: none;
    background: url('data:image/svg+xml;utf8,<svg fill="%23ff4a72" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" ><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3A5.5 5.5 0 0 1 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"/></svg>') no-repeat center/contain;
    opacity: 0.8;
    animation: fadeOutScale 1s forwards;
  }
  @keyframes fadeOutScale {
    0% {opacity: 0.8; transform: scale(1);}
    100% {opacity: 0; transform: scale(1.8);}
  }

  #love-meter {
    position: fixed;
    right: 10px;
    top: 50%;
    width: 10px;
    height: 160px;
    background: rgba(255, 92, 141, 0.4);
    border-radius: 5px;
    overflow: hidden;
    box-shadow: 0 0 18px #ff6096aa;
    transform: translateY(-50%);
  }
  #love-meter-fill {
    width: 100%;
    height: 0;
    background: linear-gradient(180deg, #ff658d, #ff3570);
    border-radius: 5px 5px 0 0;
    transition: height 0.5s ease;
    box-shadow: 0 0 10px #ff5a85;
  }

  .easter-egg {
    position: fixed;
    width: 28px; height: 28px;
    background: url('data:image/svg+xml;utf8,<svg fill="%23ffd700" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 17.27l5.18 3.14-1.64-6.95L20 9.24l-6.91-.6L12 2l-1.09 6.64-6.91.6 5.46 4.22-1.64 6.95z"/></svg>') no-repeat center/contain;
    cursor: pointer;
    filter: drop-shadow(0 0 8px #fff669);
    transition: filter 0.3s ease;
    user-select: none;
    z-index: 10;
  }
  .easter-egg:hover {
    filter: drop-shadow(0 0 24px #fff);
  }

  #egg-modal {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(255, 255, 255, 0.12);
    padding: 20px 30px;
    border-radius: 16px;
    backdrop-filter: blur(20px);
    box-shadow: 0 0 30px #ffda54bb;
    color: #fff;
    max-width: 320px;
    display: none;
    z-index: 50;
    font-style: italic;
    text-align: center;
  }
  #egg-modal img {
    max-width: 100%;
    margin-top: 12px;
    border-radius: 12px;
  }
  #egg-modal-close {
    cursor: pointer;
    margin-top: 12px;
    font-weight: 700;
  }
</style>
</head>
<body>
<div id="particles"></div>
<div id="heart-trail"></div>

<div id="love-meter"><div id="love-meter-fill"></div></div>

<div id="app-container" class="transition-in">
  <div id="heart-3d"></div>
  
  <h2 class="letter-title sparkle">My Secret Letter to Nandini</h2>
  
  <p class="letter-paragraph" style="transition-delay: 0.5s; position: relative;">
    From the depths of my heart, this letter is a whisper of my love, a secret meant only for your eyes.
    <div class="reveal-mask"></div>
  </p>
  <p class="letter-paragraph" style="transition-delay: 2s; position: relative;">
    Each word, a petal of my affection, unfolding softly like the dawn of our eternal bond...
    <div class="reveal-mask"></div>
  </p>
  <p class="letter-paragraph" style="transition-delay: 3.8s; position: relative;">
    Let this secret letter be a dance of light and shadow, a token of my endless devotion.
    <div class="reveal-mask"></div>
  </p>

  <button id="next-page-btn">Unlock Next Secret ðŸ’–</button>
</div>

<div class="easter-egg" id="easter-egg" style="top:80px; left:40px;"></div>

<div id="egg-modal">
  <div id="egg-content">A little secret just for you, Nandini! ðŸ’«</div>
  <img src="assets/images/secret_moment.jpg" alt="Secret Moment" />
  <div id="egg-modal-close">Close</div>
</div>

<script src="https://cdn.skypack.dev/@splinetool/viewer@0.9.414"></script>

<script>
  const paragraphs = document.querySelectorAll('.letter-paragraph');
  paragraphs.forEach(p => {
    setTimeout(() => {
      p.classList.add('visible');
      const mask = p.querySelector('.reveal-mask');
      if(mask) mask.style.animation = 'revealLight 5s ease forwards';
    }, 600);
  });

  const viewer = new Spline.Viewer(document.getElementById('heart-3d'));
  viewer.load('https://prod.spline.design/aUQ5OSwoULMNgL8P/scene.splinecode');

  const appContainer = document.getElementById('app-container');
  const btnNext = document.getElementById('next-page-btn');
  btnNext.addEventListener('click', () => {
    appContainer.classList.add('transition-out');
    setTimeout(() => {
      window.location.href = 'page3.html';
    }, 1100);
  });

  const canvas = document.createElement('canvas');
  document.getElementById('particles').appendChild(canvas);
  const ctx = canvas.getContext('2d');

  let width, height;
  let hearts = [];

  class HeartParticle {
    constructor() {
      this.x = Math.random() * width;
      this.y = Math.random() * height - height;
      this.size = Math.random() * 8 + 4;
      this.speed = Math.random() * 1 + 0.5;
      this.angle = Math.random() * Math.PI * 2;
      this.spinSpeed = 0.03 + Math.random() * 0.02;
      this.color = 'rgba(255, 105, 180, 0.7)';
    }
    update() {
      this.y += this.speed;
      this.angle += this.spinSpeed;
      if(this.y > height) {
        this.y = -this.size;
        this.x = Math.random() * width;
      }
    }
    draw() {
      ctx.save();
      ctx.translate(this.x, this.y);
      ctx.rotate(this.angle);
      ctx.beginPath();
      const size = this.size / 2;
      ctx.moveTo(0, 0);
      ctx.bezierCurveTo(0, -size/2, -size, -size*0.75, -size, 0);
      ctx.bezierCurveTo(-size, size*0.6, 0, size*1.2, 0, size*1.8);
      ctx.bezierCurveTo(0, size*1.2, size, size*0.6, size, 0);
      ctx.bezierCurveTo(size, -size*0.75, 0, -size/2, 0, 0);
      ctx.fillStyle = this.color;
      ctx.fill();
      ctx.restore();
    }
  }

  function initParticles() {
    hearts = [];
    for(let i = 0; i < 50; i++) {
      hearts.push(new HeartParticle());
    }
  }

  function animate() {
    ctx.clearRect(0, 0, width, height);
    hearts.forEach(h => {
      h.update();
      h.draw();
    });
    requestAnimationFrame(animate);
  }

  function resizeCanvas() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
  }

  window.addEventListener('resize', () => {
    resizeCanvas();
    initParticles();
  });

  resizeCanvas();
  initParticles();
  animate();

  const trailContainer = document.getElementById('heart-trail');
  document.addEventListener('mousemove', e => {
    const heart = document.createElement('div');
    heart.className = 'trail-heart';
    heart.style.left = (e.clientX - 6) + 'px';
    heart.style.top = (e.clientY - 6) + 'px';
    trailContainer.appendChild(heart);
    setTimeout(() => trailContainer.removeChild(heart), 1000);
  });

  const loveMeterFill = document.getElementById('love-meter-fill');
  window.addEventListener('scroll', () => {
    const scrollPercent = Math.min(window.scrollY / (document.body.scrollHeight - window.innerHeight), 1);
    loveMeterFill.style.height = (scrollPercent * 100) + '%';
  });

  const egg = document.getElementById('easter-egg');
  const eggModal = document.getElementById('egg-modal');
  const eggClose = document.getElementById('egg-modal-close');

  egg.addEventListener('click', () => {
    eggModal.style.display = 'block';
  });

  eggClose.addEventListener('click', () => {
    eggModal.style.display = 'none';
  });
</script>
</body>
</html>
